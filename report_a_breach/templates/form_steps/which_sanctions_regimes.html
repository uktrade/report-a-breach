{% extends "base_form_step.html" %}
{% load crispy_forms_tags crispy_forms_gds %}

{% block form_content %}
    {% crispy wizard.form %}
{% endblock form_content %}
{% block extra_script %}
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const searchBox =
                document.getElementById('id_which_sanctions_regime-search_bar');
            checkboxContainer = document.getElementById('govuk-checkboxes');
            searchBox.addEventListener("keyup",
                function() {
                    const value = this.value.toLowerCase();
                    const items = document.querySelectorAll('label[class="govuk-label govuk-checkboxes__label"]');
                    items.forEach(function(item) {
                        const text = item.textContent || item.innerText;
                        item.style.display = text.toLowerCase().includes(value) ? "": "none";
                    });
                    <!-- Need to move the elements to the top of the container -->
                    var fragment = document.createDocumentFragment();
                    items.forEach(function(item) {
                        if (item.style.display !== "") {
                            console.log(item)
                            fragment.appendChild(item.parentNode);
                        }
                    });
                    <!--                checkboxContainer.style.display = 'none';-->
                    <!--                checkboxContainer.appendChild(fragment);-->
                    <!--                console.log(checkboxContainer)-->
                });
        });
        <!--<label class="govuk-label govuk-checkboxes__label" for="id_which_sanctions_regime-which_sanctions_regime_1">-->
        <!--          The Afghanistan (Sanctions) (EU Exit) Regulations 2020-->
        <!--        </label>-->
    </script>
{% endblock extra_script %}
